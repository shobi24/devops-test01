groups:
  - name: go-app-alerts
    rules:

      # ðŸ”´ à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹€à¸¡à¸·à¹ˆà¸­à¹„à¸¡à¹ˆà¸¡à¸µ metrics à¹€à¸‚à¹‰à¸²à¸¡à¸² (à¹à¸­à¸›à¸­à¸²à¸ˆà¸¥à¹ˆà¸¡)
      - alert: GoAppDown
        expr: up{job="go-app"} == 0
        for: 30s
        labels:
          severity: critical
        annotations:
          summary: "Go App is DOWN"
          description: "Prometheus cannot scrape metrics from Go App for more than 30 seconds."

      # ðŸŸ  Request latency à¸ªà¸¹à¸‡à¸œà¸´à¸”à¸›à¸à¸•à¸´ (à¸„à¹ˆà¸²à¹€à¸‰à¸¥à¸µà¹ˆà¸¢à¹€à¸à¸´à¸™ 1 à¸§à¸´à¸™à¸²à¸—à¸µ)
      - alert: HighResponseLatency
        expr: |
          (
            rate(myapp_http_request_duration_seconds_sum[2m])
            /
            rate(myapp_http_request_duration_seconds_count[2m])
          ) > 1
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "High response latency"
          description: "Average response time is above 1 second for 2 minutes."

      # ðŸŸ¡ à¸¡à¸µ request à¹€à¸¢à¸­à¸°à¸œà¸´à¸”à¸›à¸à¸•à¸´ (à¹‚à¸«à¸¥à¸”à¸žà¸¸à¹ˆà¸‡)
      - alert: HighRequestRate
        expr: rate(myapp_http_requests_total[1m]) > 50
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "High request rate"
          description: "Incoming traffic is higher than 50 requests/sec."

      # ðŸ”¥ P95 latency à¸ªà¸¹à¸‡à¸¡à¸²à¸ (user à¸™à¹ˆà¸²à¸ˆà¸°à¹€à¸£à¸´à¹ˆà¸¡à¸£à¸¹à¹‰à¸ªà¸¶à¸à¸Šà¹‰à¸²)
      - alert: HighP95Latency
        expr: histogram_quantile(0.95, rate(myapp_http_request_duration_seconds_bucket[5m])) > 2
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "P95 latency is too high"
          description: "95th percentile latency is above 2 seconds."
